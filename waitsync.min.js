function WaitSync(c){var b=0;var a={};this.wrap=function(d){b++;return function(){var e=d.apply(this,arguments);b--;if(b===0){c()}return e}};this.wrapGroup=function(e,d){if(a[e]!==false){a[e]=false;b++}return function(){var f=d.apply(this,arguments);if(!a[e]){b--;a[e]=true;if(b===0){c()}}return f}}};